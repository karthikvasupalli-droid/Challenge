<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BloodMatch ‚Äî Donation Matching Platform</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <script src='https://api.mapbox.com/mapbox-gl-js/v2.9.2/mapbox-gl.js'></script>
  <link href='https://api.mapbox.com/mapbox-gl-js/v2.9.2/mapbox-gl.css' rel='stylesheet' />
  <style>
    :root{
      --primary:#d32f2f;
      --secondary:#ff5252;
      --bg:#f9f9fb;
      --card:#fff;
      font-family:'Inter',sans-serif;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{background:var(--bg);color:#222;overflow-x:hidden}

    header{
      background:linear-gradient(90deg,var(--primary),var(--secondary));
      color:white;padding:18px 20px;display:flex;align-items:center;
      justify-content:space-between;box-shadow:0 3px 10px rgba(0,0,0,0.2);
      position:sticky;top:0;z-index:999
    }
    .brand{display:flex;gap:12px;align-items:center}
    .brand .logo{width:48px;height:48px;border-radius:50%;
      background:white;color:var(--primary);
      display:flex;align-items:center;justify-content:center;font-weight:800;font-size:20px}
    nav a{color:white;text-decoration:none;margin-left:14px;font-weight:600;transition:opacity .3s}
    nav a:hover{opacity:0.7}

    /* Hero Section */
    .hero-banner{
      background:url("https://images.unsplash.com/photo-1588776814546-ec4a13e679b3") center/cover no-repeat;
      height:65vh;display:flex;align-items:center;justify-content:center;
      position:relative;border-radius:0 0 40px 40px;overflow:hidden
    }
    .hero-overlay{
      background:rgba(0,0,0,0.55);color:white;padding:40px;text-align:center;
      border-radius:16px;max-width:700px
    }
    .hero-overlay h1{font-size:40px;margin-bottom:12px}
    .hero-overlay p{font-size:18px;margin-bottom:20px}
    .hero-overlay .btn{padding:14px 24px;font-size:16px;border:none;border-radius:8px;
      background:var(--secondary);color:white;font-weight:700;cursor:pointer;transition:.3s}
    .hero-overlay .btn:hover{background:#b71c1c;transform:scale(1.05)}

    main{max-width:1200px;margin:40px auto;padding:0 16px}
    .card{background:var(--card);border-radius:16px;padding:20px;box-shadow:0 6px 18px rgba(20,20,20,0.08);transition:transform .3s,box-shadow .3s}
    .card:hover{transform:translateY(-4px);box-shadow:0 10px 20px rgba(20,20,20,0.12)}

    h2.section-title{text-align:center;margin-bottom:20px;font-size:28px;font-weight:800;color:var(--primary)}

    /* Search */
    .search-row{display:flex;gap:12px;flex-wrap:wrap;margin-top:12px}
    .input, .select, .btn{padding:12px 14px;border-radius:8px;border:1px solid #ddd;outline:none;font-size:15px}
    .btn{background:var(--primary);color:white;border:none;cursor:pointer;transition:background .3s,transform .2s}
    .btn:hover{background:#b71c1c;transform:scale(1.05)}

    /* Donor Cards */
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:16px;margin-top:20px}
    .donor{display:flex;gap:12px;align-items:center;padding:12px}
    .avatar-img{width:56px;height:56px;border-radius:50%;object-fit:cover;box-shadow:0 2px 6px rgba(0,0,0,0.2)}
    .meta div{margin:2px 0}
    .blood-pill{background:var(--secondary);color:white;padding:4px 8px;border-radius:12px;font-size:12px;font-weight:600}

    /* Map */
    #map{width:100%;height:400px;border-radius:16px;margin-top:20px;box-shadow:0 6px 18px rgba(20,20,20,0.08)}

    footer{margin:40px auto;max-width:1100px;padding:20px;color:#555;text-align:center;font-size:14px}
    @media(max-width:780px){
      .hero-overlay h1{font-size:26px}
      nav{margin-top:8px}
    }
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo">BM</div>
      <div>
        <div style="font-weight:800">BloodMatch</div>
        <div style="font-size:12px;opacity:.9">Find nearby donors fast</div>
      </div>
    </div>
    <nav>
      <a href="#search">Find Donor</a>
      <a href="#register">Register</a>
      <a href="#map">Map</a>
    </nav>
  </header>

  <!-- Hero Banner -->
  <section class="hero-banner">
    <div class="hero-overlay">
      <h1>Donate Blood, Save Lives ‚ù§Ô∏è</h1>
      <p>Join our lifesaving community. Every drop counts.</p>
      <button class="btn">Become a Donor</button>
    </div>
  </section>

  <main>
    <h2 class="section-title">Find a Donor</h2>
    <div id="search" class="card">
      <div class="search-row">
        <input id="qCity" class="input" placeholder="Enter city (e.g., Hyderabad)" />
        <select id="qGroup" class="select">
          <option value="">Any blood group</option>
          <option value="A+">A+</option>
          <option value="B+">B+</option>
          <option value="O+">O+</option>
          <option value="AB+">AB+</option>
        </select>
        <button id="btnSearch" class="btn">Search</button>
        <button id="btnReset" class="btn" style="background:#6c6c6c">Reset</button>
      </div>
      <div id="results" class="grid" aria-live="polite"></div>
    </div>

    <h2 class="section-title">Register as Donor</h2>
    <section id="register" class="card">
      <form id="donorForm">
        <input id="name" class="input" placeholder="Full Name" required />
        <input id="age" class="input" type="number" min="18" max="65" placeholder="Age" required />
        <select id="bloodGroup" class="select" required>
          <option value="">Blood group</option>
          <option>A+</option><option>A-</option><option>B+</option><option>B-</option><option>O+</option><option>O-</option><option>AB+</option><option>AB-</option>
        </select>
        <input id="city" class="input" placeholder="City" required />
        <input id="phone" class="input" placeholder="Phone" required />
        <button type="submit" class="btn" style="width:100%">Register</button>
      </form>
    </section>

    <h2 class="section-title">Donor Map</h2>
    <section id="mapSection" class="card">
      <div id="map"></div>
    </section>
  </main>

  <footer>
    ¬© 2025 BloodMatch Prototype ‚Äî Created for demo purposes. Replace with secure backend for production.
  </footer>

  <script>
    mapboxgl.accessToken = 'YOUR_MAPBOX_ACCESS_TOKEN';
    const map = new mapboxgl.Map({
      container: 'map',
      style: 'mapbox://styles/mapbox/streets-v11',
      center: [78.4867, 17.3850],
      zoom: 4
    });

    const DB_KEY = 'bloodmatch_donors_v2';
    function readDB(){try{const raw=localStorage.getItem(DB_KEY);return raw?JSON.parse(raw):[]}catch(e){return []}}
    function writeDB(arr){localStorage.setItem(DB_KEY,JSON.stringify(arr))}
    function uid(){return Date.now()+Math.floor(Math.random()*999)}

    const donorsDemo = [
      {id:1,name:'Ravi Kumar',age:30,blood:'O+',city:'Hyderabad',coords:[78.4867,17.3850],phone:'+91-90000-0001',img:'https://randomuser.me/api/portraits/men/32.jpg'},
      {id:2,name:'Ananya Singh',age:25,blood:'B+',city:'Pune',coords:[73.8567,18.5204],phone:'+91-90000-0002',img:'https://randomuser.me/api/portraits/women/45.jpg'},
      {id:3,name:'Maya Verma',age:28,blood:'O-',city:'Bengaluru',coords:[77.5946,12.9716],phone:'+91-90000-0003',img:'https://randomuser.me/api/portraits/women/68.jpg'},
      {id:4,name:'Karan Patel',age:40,blood:'AB+',city:'Ahmedabad',coords:[72.5714,23.0225],phone:'+91-90000-0004',img:'https://randomuser.me/api/portraits/men/75.jpg'}
    ];

    function renderResults(list){
      const resultsEl=document.getElementById('results');
      resultsEl.innerHTML='';
      if(!list.length){resultsEl.innerHTML='<div class="muted" style="grid-column:1/-1">No donors found.</div>';return}
      list.forEach(d=>{
        const el=document.createElement('div');el.className='card donor';
        el.innerHTML=`
          <img src="${d.img}" class="avatar-img" alt="${d.name}" />
          <div class="meta">
            <div style="font-weight:700">${d.name} <span class="blood-pill">${d.blood}</span></div>
            <div class="muted">üìç ${d.city}</div>
            <div>üìû ${d.phone}</div>
          </div>`;
        resultsEl.appendChild(el);
      })
      updateMap(list);
    }

    function updateMap(donors){
      if(map.getSource('donors')){map.removeLayer('donors-heat');map.removeSource('donors')}
      const geojson={type:'FeatureCollection',features:donors.map(d=>({type:'Feature',geometry:{type:'Point',coordinates:d.coords},properties:{title:d.name}}))}
      map.addSource('donors',{type:'geojson',data:geojson})
      map.addLayer({id:'donors-heat',type:'heatmap',source:'donors',paint:{'heatmap-weight':1,'heatmap-intensity':1,'heatmap-radius':30,'heatmap-opacity':0.6}})
    }

    document.getElementById('btnSearch').addEventListener('click',()=>{
      const city=document.getElementById('qCity').value.toLowerCase();
      const group=document.getElementById('qGroup').value;
      let data=readDB();
      if(city)data=data.filter(d=>d.city.toLowerCase().includes(city));
      if(group)data=data.filter(d=>d.blood===group);
      renderResults(data);
    });

    document.getElementById('btnReset').addEventListener('click',()=>{renderResults(readDB())});

    document.getElementById('donorForm').addEventListener('submit',e=>{
      e.preventDefault();
      const name=document.getElementById('name').value;
      const age=parseInt(document.getElementById('age').value,10);
      const blood=document.getElementById('bloodGroup').value;
      const city=document.getElementById('city').value;
      const phone=document.getElementById('phone').value;
      const img="https://randomuser.me/api/portraits/lego/1.jpg";
      const coords=[78.4867,17.3850];
      const db=readDB();
      db.push({id:uid(),name,age,blood,city,phone,coords,img});
      writeDB(db);renderResults(db);
      e.target.reset();
    });

    (function init(){
      if(!readDB().length){writeDB(donorsDemo)}
      renderResults(readDB());
    })();
  </script>
</body>
</html>
